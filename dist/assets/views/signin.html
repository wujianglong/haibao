<div class="content ">
  <div class="main">
    <div class="mainWrap clearfix">
      <div class="leftBox pull-left"></div>
      <div class="rightBox pull-left">
        <div class="sign-flow signinBox">
          <form class="form-inline" name="formSignin" novalidate="novalidate">
            <div class="title">
              <a class="cur signinBtn" id="defaultClick" ng-click="signin()" href="javascript:void 0">登录中...</a>
              <!-- <a class="signupBtn" href="javascript:void 0" ui-sref="account.signup">注册</a> -->
              <!-- <div class="triangle-up"></div> -->
            </div>
            <!-- <div class="form-group firstNone">
              <input type="text" placeholder="手机号" required class="form-control-my" name="accountNumber" ng-model="user.accountNumber" ng-pattern="/^1[3-9][0-9]{9,9}$/" id="username" my-focus>
              <p class="error-block" ng-show="(formSignin.accountNumber.$dirty||formSignin.submitted)&&formSignin.accountNumber.$invalid&&!formSignin.accountNumber.$focused">手机号格式错误</p>
            </div>
            <div class="form-group">
              <input type="password" placeholder="密码" required ng-pattern='/^[0-9a-zA-Z!@#$%^&*(){}:"|>?\[\];,./\-=_+]{6,16}$/' class="form-control-my" name="passWord" ng-model="user.passWord" id="pwdIn" my-focus>
              <p class="error-block" ng-show="(formSignin.passWord.$dirty||formSignin.submitted)&&formSignin.passWord.$invalid&&!formSignin.passWord.$focused">密码格式错误</p>
              <p class="error-block" ng-show="!formSignin.passWord.$invalid&&userorpwdIsError&&!formSignin.passWord.$focused">手机号或密码错误</p>
            </div>
            <div class="button-wrapper form-group">
              <button class="sign-button submit" id="defaultClick" type="submit" ng-click="signin()">登录</button>
            </div>
            <div class="bot clearfix">
              <a class="pull-right" href="javascript:void 0" ui-sref="account.forgotpassword">找回密码</a>
            </div> -->
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  function getQueryVariable(variable) {
    var query = window.location.hash.substring(1).split('?')[1];
    var vars = query.split("&");
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split("=");
      if (pair[0] == variable) {
        return pair[1];
      }
    }
    return (false);
  }

  // let rc_id = getQueryVariable('rc_id')
  // let chat_id = getQueryVariable('chat_id')
  // let rc_token = getQueryVariable('rc_token')



  // localStorage.setItem('rc_id', getQueryVariable('rc_id'))
  // localStorage.setItem('chat_id', getQueryVariable('chat_id'))
  // localStorage.setItem('rc_token', getQueryVariable('rc_token'))

  // localStorage.setItem('rc_id', getQueryVariable('rc_id'))
  // localStorage.setItem('chat_id', getQueryVariable('chat_id'))
  // localStorage.setItem('rc_token', getQueryVariable('rc_token')

  // if (window.location.hash.includes("rc_token")) {
  //   localStorage.setItem('rc_id', getQueryVariable('rc_id'))
  //   localStorage.setItem('chat_id', getQueryVariable('chat_id'))
  //   localStorage.setItem('rc_token', getQueryVariable('rc_token'))

  //   $(function() {
  //     setTimeout(function() {
  //       document.getElementById("defaultClick").click()
  //     }, 1000)
  //   })
  // }

  // var rc_id = '912a1a4e584e77e527249f5b8d1ecfba'


  console.log("执行了几次")


  // var form = {
  //   rc_id: '912a1a4e584e77e527249f5b8d1ecfba',
  //   rc_token: '2B2hJEhN1sBjCe1EKixXHFu6XkQZGBew93P/JZWXRj9jC23eJq1aYIvsBtopRTlOgqPF1+aEZNs=@54ny.cn.rongnav.com;54ny.cn.rongcfg.com',
  //   chat_id: '46f02d95d0fde77af43cd801d0878eba'
  // }


  var l = decodeURIComponent(location.href)

  console.log('url', l)

  if (l.includes('==')) {

    var j = JSON.parse(l.split("==")[1])

    console.log('j', j)

    localStorage.setItem('rc_id', j.rc_id)
    localStorage.setItem('rc_token', j.rc_token)
    localStorage.setItem('chat_id', j.chat_id)
  }




  // localStorage.setItem('rc_id', '912a1a4e584e77e527249f5b8d1ecfba')
  // localStorage.setItem('rc_token', '2B2hJEhN1sBjCe1EKixXHFu6XkQZGBew93P/JZWXRj9jC23eJq1aYIvsBtopRTlOgqPF1+aEZNs=@54ny.cn.rongnav.com;54ny.cn.rongcfg.com')
  // localStorage.setItem('chat_id', '46f02d95d0fde77af43cd801d0878eba')

  $(function() {

    setTimeout(function() {
      if (localStorage.getItem("rc_token")) {
        document.getElementById("defaultClick").click()
      }
    }, 500)
  })




  // console.log('rc_id', rc_id)
  // console.log('chat_id', chat_id)
  // console.log('rc_token', rc_token)

  // console.log('rc_id', localStorage.getItem("rc_id"))
  // console.log('chat_id', localStorage.getItem("chat_id"))
  // console.log('rc_token', localStorage.getItem("rc_token"))




  // function setCookie(cname, cvalue, exdays) {
  //   var d = new Date();
  //   d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
  //   var expires = "expires=" + d.toGMTString();
  //   document.cookie = cname + "=" + cvalue + "; " + expires;
  // }

  // setCookie('loginuserid', rc_id, (new Date()).toGMTString())
  // setCookie('loginusertoken', rc_token, (new Date()).toGMTString())
</script>